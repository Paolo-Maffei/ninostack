\hypertarget{rf_8h}{
\section{/home/juha/ns\_\-1\_\-1\_\-0/subversion/nanostack/Platform/nano/include/rf.h File Reference}
\label{rf_8h}\index{/home/juha/ns_1_1_0/subversion/nanostack/Platform/nano/include/rf.h@{/home/juha/ns\_\-1\_\-1\_\-0/subversion/nanostack/Platform/nano/include/rf.h}}
}
nano.4 RF driver. 

\subsection*{Functions}
\begin{CompactItemize}
\item 
port\-CHAR \hyperlink{rf_8h_eec362bfdb2f849d39ad0d28e9222a72}{rf\_\-init} (void)
\item 
port\-CHAR \hyperlink{rf_8h_fd6db435d4b4e09d32c69a9d4d8334a8}{rf\_\-rx\_\-enable} (void)
\item 
port\-CHAR \hyperlink{rf_8h_d82d143983e9998c415860e3b5fe47a1}{rf\_\-rx\_\-disable} (void)
\item 
port\-CHAR \hyperlink{rf_8h_dcdd963f53baa6a6c1e696347cee1ee7}{rf\_\-write} (\hyperlink{structbuffer__t}{buffer\_\-t} $\ast$buffer)
\item 
void \hyperlink{rf_8h_91b1dad538e14708668fae49263edccb}{rf\_\-send\_\-ack} (uint8\_\-t pending)
\item 
int8\_\-t \hyperlink{rf_8h_293d8239631f9bdb850229c63183db6c}{rf\_\-analyze\_\-rssi} (void)
\item 
port\-CHAR \hyperlink{rf_8h_71b74455854c04aca3d86015cf95eb09}{rf\_\-cca\_\-check} (uint8\_\-t backoff\_\-count, uint8\_\-t slotted)
\item 
port\-CHAR \hyperlink{rf_8h_d5647eee88c52cfdce3ca0050698d6a8}{rf\_\-mac\_\-get} (\hyperlink{structsockaddr__t}{sockaddr\_\-t} $\ast$address)
\item 
int8\_\-t \hyperlink{rf_8h_9c0a6b3166fee2e94c93fffcc7311ed4}{rf\_\-power\_\-set} (uint8\_\-t new\_\-power)
\item 
int8\_\-t \hyperlink{rf_8h_d9bcbebe4b4a24f33589758f40f6f01f}{rf\_\-channel\_\-set} (uint8\_\-t channel)
\item 
void \hyperlink{rf_8h_0277c393576496666249abaad4cec56d}{rf\_\-ISR} (void) interrupt(RF\_\-VECTOR)
\item 
void \hyperlink{rf_8h_5ab5f8cbe9189f9196ef8065b21ddf15}{rf\_\-error\_\-ISR} (void) interrupt(RFERR\_\-VECTOR)
\item 
void \hyperlink{rf_8h_b2528ef2a5447d1130407d221baf9f80}{mac\_\-start\_\-ed\_\-scan} (void)
\item 
void \hyperlink{rf_8h_3a1aa8cd4d2b015130da2b84c52ec85f}{mac\_\-gw\_\-discover} (void)
\item 
port\-CHAR \hyperlink{rf_8h_1652b8296d7a61e97b28661c9bb9e40d}{rf\_\-address\_\-decoder\_\-mode} (rf\_\-address\_\-mode\_\-t mode)
\item 
void \hyperlink{rf_8h_262377dd5ce71a6ded4a7e4f86a2df1a}{rf\_\-set\_\-address} (\hyperlink{structsockaddr__t}{sockaddr\_\-t} $\ast$address)
\end{CompactItemize}


\subsection{Detailed Description}
nano.4 RF driver. 

Nano.4: RF control headers. 

\subsection{Function Documentation}
\hypertarget{rf_8h_3a1aa8cd4d2b015130da2b84c52ec85f}{
\index{rf.h@{rf.h}!mac_gw_discover@{mac\_\-gw\_\-discover}}
\index{mac_gw_discover@{mac\_\-gw\_\-discover}!rf.h@{rf.h}}
\subsubsection[mac\_\-gw\_\-discover]{\setlength{\rightskip}{0pt plus 5cm}void mac\_\-gw\_\-discover (void)}}
\label{rf_8h_3a1aa8cd4d2b015130da2b84c52ec85f}


GW scan with channel change.

Change next channel and create \& send ROUTER SOLICATION MESSAGE \hypertarget{rf_8h_b2528ef2a5447d1130407d221baf9f80}{
\index{rf.h@{rf.h}!mac_start_ed_scan@{mac\_\-start\_\-ed\_\-scan}}
\index{mac_start_ed_scan@{mac\_\-start\_\-ed\_\-scan}!rf.h@{rf.h}}
\subsubsection[mac\_\-start\_\-ed\_\-scan]{\setlength{\rightskip}{0pt plus 5cm}void mac\_\-start\_\-ed\_\-scan (void)}}
\label{rf_8h_b2528ef2a5447d1130407d221baf9f80}


Enable ED-scan.

Working only when MAC\_\-ENERGY\_\-SCAN defined \hypertarget{rf_8h_1652b8296d7a61e97b28661c9bb9e40d}{
\index{rf.h@{rf.h}!rf_address_decoder_mode@{rf\_\-address\_\-decoder\_\-mode}}
\index{rf_address_decoder_mode@{rf\_\-address\_\-decoder\_\-mode}!rf.h@{rf.h}}
\subsubsection[rf\_\-address\_\-decoder\_\-mode]{\setlength{\rightskip}{0pt plus 5cm}port\-CHAR rf\_\-address\_\-decoder\_\-mode (rf\_\-address\_\-mode\_\-t {\em mode})}}
\label{rf_8h_1652b8296d7a61e97b28661c9bb9e40d}


Set address decoder on/off.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em param}]1=on 0=off. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]pd\-TRUE operation successful \end{Desc}
\hypertarget{rf_8h_293d8239631f9bdb850229c63183db6c}{
\index{rf.h@{rf.h}!rf_analyze_rssi@{rf\_\-analyze\_\-rssi}}
\index{rf_analyze_rssi@{rf\_\-analyze\_\-rssi}!rf.h@{rf.h}}
\subsubsection[rf\_\-analyze\_\-rssi]{\setlength{\rightskip}{0pt plus 5cm}int8\_\-t rf\_\-analyze\_\-rssi (void)}}
\label{rf_8h_293d8239631f9bdb850229c63183db6c}


Channel energy detect.

Coordinator use this function detect best channel for PAN-network. \begin{Desc}
\item[Returns:]RSSI-energy level d\-Bm. 

0 operation failed. \end{Desc}
\hypertarget{rf_8h_71b74455854c04aca3d86015cf95eb09}{
\index{rf.h@{rf.h}!rf_cca_check@{rf\_\-cca\_\-check}}
\index{rf_cca_check@{rf\_\-cca\_\-check}!rf.h@{rf.h}}
\subsubsection[rf\_\-cca\_\-check]{\setlength{\rightskip}{0pt plus 5cm}port\-CHAR rf\_\-cca\_\-check (uint8\_\-t {\em backoff\_\-count}, uint8\_\-t {\em slotted})}}
\label{rf_8h_71b74455854c04aca3d86015cf95eb09}


Clear channel assesment check.

\begin{Desc}
\item[Returns:]pd\-TRUE CCA clear 

pd\-FALSE CCA reserved \end{Desc}
\hypertarget{rf_8h_d9bcbebe4b4a24f33589758f40f6f01f}{
\index{rf.h@{rf.h}!rf_channel_set@{rf\_\-channel\_\-set}}
\index{rf_channel_set@{rf\_\-channel\_\-set}!rf.h@{rf.h}}
\subsubsection[rf\_\-channel\_\-set]{\setlength{\rightskip}{0pt plus 5cm}int8\_\-t rf\_\-channel\_\-set (uint8\_\-t {\em channel})}}
\label{rf_8h_d9bcbebe4b4a24f33589758f40f6f01f}


Select RF channel.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em channel}]channel number to select\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]channel value or negative (invalid channel number) \end{Desc}
\hypertarget{rf_8h_5ab5f8cbe9189f9196ef8065b21ddf15}{
\index{rf.h@{rf.h}!rf_error_ISR@{rf\_\-error\_\-ISR}}
\index{rf_error_ISR@{rf\_\-error\_\-ISR}!rf.h@{rf.h}}
\subsubsection[rf\_\-error\_\-ISR]{\setlength{\rightskip}{0pt plus 5cm}void rf\_\-error\_\-ISR (void)}}
\label{rf_8h_5ab5f8cbe9189f9196ef8065b21ddf15}


RF error interrupt service routine. \hypertarget{rf_8h_eec362bfdb2f849d39ad0d28e9222a72}{
\index{rf.h@{rf.h}!rf_init@{rf\_\-init}}
\index{rf_init@{rf\_\-init}!rf.h@{rf.h}}
\subsubsection[rf\_\-init]{\setlength{\rightskip}{0pt plus 5cm}port\-CHAR rf\_\-init (void)}}
\label{rf_8h_eec362bfdb2f849d39ad0d28e9222a72}


Initialize RF.

\begin{Desc}
\item[Returns:]pd\-TRUE 

pd\-FALSE bus not free or init failed \end{Desc}
\hypertarget{rf_8h_0277c393576496666249abaad4cec56d}{
\index{rf.h@{rf.h}!rf_ISR@{rf\_\-ISR}}
\index{rf_ISR@{rf\_\-ISR}!rf.h@{rf.h}}
\subsubsection[rf\_\-ISR]{\setlength{\rightskip}{0pt plus 5cm}void rf\_\-ISR (void)}}
\label{rf_8h_0277c393576496666249abaad4cec56d}


RF interrupt service routine. \hypertarget{rf_8h_d5647eee88c52cfdce3ca0050698d6a8}{
\index{rf.h@{rf.h}!rf_mac_get@{rf\_\-mac\_\-get}}
\index{rf_mac_get@{rf\_\-mac\_\-get}!rf.h@{rf.h}}
\subsubsection[rf\_\-mac\_\-get]{\setlength{\rightskip}{0pt plus 5cm}port\-CHAR rf\_\-mac\_\-get (\hyperlink{structsockaddr__t}{sockaddr\_\-t} $\ast$ {\em address})}}
\label{rf_8h_d5647eee88c52cfdce3ca0050698d6a8}


Get HW MAC address

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em address}]address to set \end{description}
\end{Desc}
\hypertarget{rf_8h_9c0a6b3166fee2e94c93fffcc7311ed4}{
\index{rf.h@{rf.h}!rf_power_set@{rf\_\-power\_\-set}}
\index{rf_power_set@{rf\_\-power\_\-set}!rf.h@{rf.h}}
\subsubsection[rf\_\-power\_\-set]{\setlength{\rightskip}{0pt plus 5cm}int8\_\-t rf\_\-power\_\-set (uint8\_\-t {\em new\_\-power})}}
\label{rf_8h_9c0a6b3166fee2e94c93fffcc7311ed4}


Select RF transmit power.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em new\_\-power}]new power level (in per cent)\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]new level or negative (value out of range) \end{Desc}
\hypertarget{rf_8h_d82d143983e9998c415860e3b5fe47a1}{
\index{rf.h@{rf.h}!rf_rx_disable@{rf\_\-rx\_\-disable}}
\index{rf_rx_disable@{rf\_\-rx\_\-disable}!rf.h@{rf.h}}
\subsubsection[rf\_\-rx\_\-disable]{\setlength{\rightskip}{0pt plus 5cm}port\-CHAR rf\_\-rx\_\-disable (void)}}
\label{rf_8h_d82d143983e9998c415860e3b5fe47a1}


Disable RF receiver.

\begin{Desc}
\item[Returns:]pd\-TRUE 

pd\-FALSE bus not free \end{Desc}
\hypertarget{rf_8h_fd6db435d4b4e09d32c69a9d4d8334a8}{
\index{rf.h@{rf.h}!rf_rx_enable@{rf\_\-rx\_\-enable}}
\index{rf_rx_enable@{rf\_\-rx\_\-enable}!rf.h@{rf.h}}
\subsubsection[rf\_\-rx\_\-enable]{\setlength{\rightskip}{0pt plus 5cm}port\-CHAR rf\_\-rx\_\-enable (void)}}
\label{rf_8h_fd6db435d4b4e09d32c69a9d4d8334a8}


Enable RF receiver.

\begin{Desc}
\item[Returns:]pd\-TRUE 

pd\-FALSE bus not free \end{Desc}
\hypertarget{rf_8h_91b1dad538e14708668fae49263edccb}{
\index{rf.h@{rf.h}!rf_send_ack@{rf\_\-send\_\-ack}}
\index{rf_send_ack@{rf\_\-send\_\-ack}!rf.h@{rf.h}}
\subsubsection[rf\_\-send\_\-ack]{\setlength{\rightskip}{0pt plus 5cm}void rf\_\-send\_\-ack (uint8\_\-t {\em pending})}}
\label{rf_8h_91b1dad538e14708668fae49263edccb}


Send ACK.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em pending}]set up pending flag if pending $>$ 0. \end{description}
\end{Desc}
\hypertarget{rf_8h_262377dd5ce71a6ded4a7e4f86a2df1a}{
\index{rf.h@{rf.h}!rf_set_address@{rf\_\-set\_\-address}}
\index{rf_set_address@{rf\_\-set\_\-address}!rf.h@{rf.h}}
\subsubsection[rf\_\-set\_\-address]{\setlength{\rightskip}{0pt plus 5cm}void rf\_\-set\_\-address (\hyperlink{structsockaddr__t}{sockaddr\_\-t} $\ast$ {\em address})}}
\label{rf_8h_262377dd5ce71a6ded4a7e4f86a2df1a}


Set address decoder parameters

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em address}]address for decoder \end{description}
\end{Desc}
\hypertarget{rf_8h_dcdd963f53baa6a6c1e696347cee1ee7}{
\index{rf.h@{rf.h}!rf_write@{rf\_\-write}}
\index{rf_write@{rf\_\-write}!rf.h@{rf.h}}
\subsubsection[rf\_\-write]{\setlength{\rightskip}{0pt plus 5cm}port\-CHAR rf\_\-write (\hyperlink{structbuffer__t}{buffer\_\-t} $\ast$ {\em buffer})}}
\label{rf_8h_dcdd963f53baa6a6c1e696347cee1ee7}


Transmit packet.

Missing feature: address type check

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em mac}]RF HW address \item[{\em dst}]destination HW address \item[{\em buffer}]data buffer pointer \item[{\em length}]length of data\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]pd\-TRUE+1 channel occupied 

pd\-TRUE 

pd\-FALSE bus reserved \end{Desc}
